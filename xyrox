-- Load WindUI
local WindUI = loadstring(game:HttpGet("https://raw.githubusercontent.com/Footagesus/WindUI/main/main.lua"))()

-- Show popup confirmation
local Confirmed = false
WindUI:Popup({
    Title = "Grow a Garden Script",
    Icon = "leaf",
    Content = "UI by xyroxcursedasian",
    Buttons = {
        {
            Title = "Cancel",
            Variant = "Secondary",
            Callback = function() end,
        },
        {
            Title = "Continue",
            Icon = "check",
            Variant = "Primary",
            Callback = function() Confirmed = true end,
        }
    }
})
repeat task.wait() until Confirmed

-- Create UI Window
local Window = WindUI:CreateWindow({
    Title = "Grow a Garden Script",
    Icon = "leaf",
    Author = "xyroxcursedasian",
    Folder = "GrowGardenUI",
    Size = UDim2.fromOffset(580, 460),
    Transparent = true,
    Theme = "Dark",
    SideBarWidth = 180,
    HasOutline = true,
    User = {
        Enabled = false,
        Anonymous = true
    },
})

-- Toggle Key
Window:EditOpenButton({
    Title = "Open Grow UI",
    Icon = "sprout",
    Draggable = true,
    StrokeThickness = 2,
    CornerRadius = UDim.new(0, 16),
    Color = ColorSequence.new(Color3.fromRGB(0, 255, 0), Color3.fromRGB(0, 170, 0))
})

-- Tabs
local farmingTab = Window:Tab({ Title = "Auto Farming", Icon = "tractor" })
local utilityTab = Window:Tab({ Title = "Utility", Icon = "tool" })
local visualsTab = Window:Tab({ Title = "Visuals", Icon = "eye" })
local fpsTab = Window:Tab({ Title = "FPS Boost", Icon = "zap" })

-- Script variables
local autoFarmEnabled = false
local autoSellEnabled = false
local selectedCrop = "Wheat"

-- Farming Logic
farmingTab:Toggle({
    Title = "Auto Farm",
    Callback = function(state)
        autoFarmEnabled = state
        task.spawn(function()
            while autoFarmEnabled do
                task.wait(0.1)
                for _, v in pairs(workspace:WaitForChild("Plots"):GetDescendants()) do
                    if v.Name == "PlotScript" then
                        local plot = v.Parent
                        fireproximityprompt(plot.Interaction.ProximityPrompt)
                        if plot:FindFirstChild("Plant") and plot.Plant:FindFirstChild("ClickDetector") then
                            fireclickdetector(plot.Plant.ClickDetector)
                        end
                    end
                end
            end
        end)
    end
})

farmingTab:Toggle({
    Title = "Auto Sell",
    Callback = function(state)
        autoSellEnabled = state
        task.spawn(function()
            while autoSellEnabled do
                task.wait(1)
                local sellPart = workspace:FindFirstChild("Sell")
                if sellPart then
                    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = sellPart.CFrame + Vector3.new(0, 5, 0)
                end
            end
        end)
    end
})

farmingTab:Dropdown({
    Title = "Select Crop",
    Values = { "Wheat", "Carrot", "Corn", "Pumpkin" },
    Value = "Wheat",
    Callback = function(value)
        selectedCrop = value
    end
})

farmingTab:Button({
    Title = "Plant Selected Crop",
    Callback = function()
        game:GetService("ReplicatedStorage").Remotes.PlantCrop:FireServer(selectedCrop)
    end
})

-- Tools
utilityTab:Button({
    Title = "Get Watering Can",
    Callback = function()
        local tool = game:GetService("ReplicatedStorage").Tools:FindFirstChild("Watering Can")
        if tool then tool:Clone().Parent = game.Players.LocalPlayer.Backpack end
    end
})

utilityTab:Button({
    Title = "Get Shovel",
    Callback = function()
        local tool = game:GetService("ReplicatedStorage").Tools:FindFirstChild("Shovel")
        if tool then tool:Clone().Parent = game.Players.LocalPlayer.Backpack end
    end
})

-- ESP
visualsTab:Toggle({
    Title = "ESP (Plots)",
    Callback = function(state)
        for _, plot in pairs(workspace:WaitForChild("Plots"):GetChildren()) do
            local existing = plot:FindFirstChild("ESPBox")
            if existing then existing:Destroy() end
            if state then
                local box = Instance.new("BoxHandleAdornment", plot)
                box.Adornee = plot
                box.Size = plot.Size
                box.Color3 = Color3.fromRGB(0, 255, 0)
                box.AlwaysOnTop = true
                box.ZIndex = 10
                box.Transparency = 0.5
                box.Name = "ESPBox"
            end
        end
    end
})

-- FPS Boost
fpsTab:Button({
    Title = "Boost FPS",
    Callback = function()
        for _, v in pairs(game:GetDescendants()) do
            if v:IsA("BasePart") then
                v.Material = Enum.Material.SmoothPlastic
                v.Reflectance = 0
            elseif v:IsA("Decal") then
                v:Destroy()
            end
        end
        sethiddenproperty(game:GetService("Lighting"), "Technology", Enum.Technology.Compatibility)
        local lighting = game:GetService("Lighting")
        lighting.FogEnd = 9e9
        lighting.Brightness = 0
        lighting.GlobalShadows = false
    end
})